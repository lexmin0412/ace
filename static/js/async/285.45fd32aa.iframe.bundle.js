"use strict";(self.webpackChunk_lexmin0412_ace=self.webpackChunk_lexmin0412_ace||[]).push([["285"],{"./src/UltraTable/index.tsx":function(e,n,t){t.d(n,{H:function(){return s},L:function(){return i}});var r=t("./node_modules/.pnpm/react@19.0.0/node_modules/react/jsx-runtime.js"),a=t("./node_modules/.pnpm/ahooks@3.8.4_react@19.0.0/node_modules/ahooks/es/usePagination/index.js"),l=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/table/index.js"),o=t("./node_modules/.pnpm/react@19.0.0/node_modules/react/index.js");let s=()=>{let[e,n]=(0,o.useState)(0);return{refreshKey:e,dispatchRefresh:()=>n(e+1)}},i=e=>{let{columns:n,rowKey:t="id",request:s,refreshDeps:i,renderTotal:d}=e,{data:u,runAsync:c,pagination:p,loading:m}=(0,a.Z)(e=>(console.log("enter ultra table request",e),s(e)),{defaultPageSize:5,refreshDeps:i,onSuccess:e=>{console.log("ultra table request success",e)},onError:e=>{console.log("ultra table request error",e)}});return(0,o.useEffect)(()=>{c({current:1,pageSize:5})},[]),(null==u?void 0:u.list)?(0,r.jsx)(l.Z,{className:"ultra-table",columns:n,dataSource:u.list,rowKey:t,pagination:{current:p.current,pageSize:p.pageSize,showSizeChanger:!0,total:p.total,showTotal:d||(e=>`共 ${e} 条`),onChange:p.onChange},loading:m}):null};i.__docgenInfo={description:"",methods:[],displayName:"UltraTable",props:{columns:{required:!0,tsType:{name:"ColumnsType",elements:[{name:"any"}],raw:"ColumnsType<any>"},description:""},request:{required:!0,tsType:{name:"signature",type:"function",raw:"(params: unknown) => Promise<{\n  list: any[];\n  total: number;\n}>",signature:{arguments:[{type:{name:"unknown"},name:"params"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:"{\n  list: any[];\n  total: number;\n}",signature:{properties:[{key:"list",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!0}},{key:"total",value:{name:"number",required:!0}}]}}],raw:"Promise<{\n  list: any[];\n  total: number;\n}>"}}},description:""},rowKey:{required:!1,tsType:{name:"string"},description:""},refreshDeps:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"unknown[]"},description:""},renderTotal:{required:!1,tsType:{name:"signature",type:"function",raw:"(total: number) => React.ReactNode",signature:{arguments:[{type:{name:"number"},name:"total"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}},composes:["TableProps"]}},"./src/index.tsx":function(e,n,t){t.d(n,{I4:()=>J,sd:()=>q,Ac:()=>w,LB:()=>M.L,zH:()=>i,o_:()=>b,CV:()=>c,Sj:()=>f});var r,a=t("./node_modules/.pnpm/react@19.0.0/node_modules/react/jsx-runtime.js"),l=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/popover/index.js"),o=t("./node_modules/.pnpm/react@19.0.0/node_modules/react/index.js");let s=["rgb(0, 0, 0)","rgb(38, 38, 38)","rgb(88, 90, 90)","rgb(138, 143, 141)","rgb(216, 218, 217)","rgb(231, 233, 232)","rgb(239, 240, 240)","rgb(244, 245, 245)","rgb(250, 250, 250)","rgb(255, 255, 255)","rgb(223, 42, 63)","rgb(237, 116, 12)","rgb(236, 170, 4)","rgb(251, 222, 40)","rgb(116, 182, 2)","rgb(29, 192, 201)","rgb(17, 124, 238)","rgb(47, 75, 218)","rgb(96, 27, 222)","rgb(210, 45, 141)","rgb(251, 228, 231)","rgb(253, 230, 211)","rgb(249, 239, 205)","rgb(251, 245, 203)","rgb(232, 247, 207)","rgb(206, 245, 247)","rgb(217, 234, 252)","rgb(217, 223, 252)","rgb(230, 220, 249)","rgb(251, 223, 239)","rgb(241, 162, 171)","rgb(248, 184, 129)","rgb(245, 212, 128)","rgb(252, 231, 90)","rgb(193, 231, 126)","rgb(129, 223, 228)","rgb(129, 187, 248)","rgb(150, 167, 253)","rgb(186, 155, 242)","rgb(242, 151, 204)","rgb(228, 73, 91)","rgb(243, 143, 57)","rgb(243, 187, 47)","rgb(237, 206, 2)","rgb(140, 207, 23)","rgb(1, 178, 188)","rgb(47, 142, 244)","rgb(72, 97, 224)","rgb(126, 69, 232)","rgb(231, 70, 164)","rgb(173, 26, 43)","rgb(199, 92, 0)","rgb(201, 145, 3)","rgb(165, 143, 4)","rgb(92, 141, 7)","rgb(7, 120, 126)","rgb(12, 104, 202)","rgb(33, 59, 192)","rgb(76, 22, 177)","rgb(174, 20, 110)","rgb(112, 0, 13)","rgb(102, 48, 0)","rgb(102, 73, 0)","rgb(102, 88, 0)","rgb(42, 66, 0)","rgb(0, 67, 71)","rgb(0, 52, 107)","rgb(16, 30, 96)","rgb(39, 0, 112)","rgb(92, 0, 54)"],i=e=>{let{labelForSelected:n="Selected",value:t,children:r,onChange:i}=e,[d,u]=(0,o.useState)(!1),[c,p]=(0,o.useState)("#000");(0,o.useEffect)(()=>{t&&p(t)},[t]),(0,o.useEffect)(()=>{let e=function(e){e.target.classList.contains("antd-ce-color-item-inner")||u(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);let m=e=>{console.log("handleColorChange",e),t||p(e),u(!1),null==i||i(e)},g=e=>{let{color:n}=e;return(0,a.jsx)("div",{className:"antd-ce-color-item",onClick:()=>m(n),children:(0,a.jsx)("div",{className:"antd-ce-color-item-inner",style:{backgroundColor:n}})},n)};return(0,a.jsx)(l.Z,{open:d,title:"",content:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)(g,{color:c}),(0,a.jsx)("div",{className:"header-title",children:n})]}),(0,a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"240px"},children:s.map(e=>(0,a.jsx)(g,{color:e},e))})]}),children:(0,a.jsx)("div",{id:"antd-ce-popover-overlay",className:"antd-ce-popover-overlay",onClick:e=>{e.stopPropagation(),u(!0)},children:r})})};i.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{labelForSelected:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"union",raw:"JSX.Element | JSX.Element[]",elements:[{name:"JSX.Element"},{name:"Array",elements:[{name:"JSX.Element"}],raw:"JSX.Element[]"}]},description:""}}};var d=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/message/index.js"),u=t("./node_modules/.pnpm/@toolkit-fe+clipboard@0.1.22/node_modules/@toolkit-fe/clipboard/es/index.js");let c=e=>{let{content:n,children:t}=e;return t?(0,a.jsx)("span",{className:"copable-wrapper",onClick:async()=>{console.log("开始复制",n),await (0,u.v)(n),console.log("复制完毕"),d.ZP.success(`已复制 ${n}`)},children:t}):null};c.__docgenInfo={description:"复制容器",methods:[],displayName:"Copyable",props:{content:{required:!0,tsType:{name:"string"},description:"要复制的内容"},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"子元素"}}};var p=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/form/index.js"),m=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/input/index.js");function g(){return(0,a.jsxs)("div",{style:{position:"relative",width:"14px",height:"14px"},children:[(0,a.jsx)("div",{style:{position:"absolute",width:"14px",height:"2px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#0D6EFF"}}),(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"2px",height:"14px",background:"#0D6EFF"}})]})}g.__docgenInfo={description:"",methods:[],displayName:"IconAdd"};let v=e=>JSON.parse(JSON.stringify(e)),b=e=>{let{addIcon:n,removeIcon:t,placeholder:r="Please input",value:l,onChange:s}=e,[i,d]=(0,o.useState)([""]),u=(0,o.useMemo)(()=>l||i,[l,i]),c=(e,n)=>{let t=v(u);t[n]=e.target.value,d(t),null==s||s(t)},b=e=>{let n=v(u);n.splice(e,1),d(n),null==s||s(n)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"form-item-container",children:(0,a.jsx)(p.Z.Item,{noStyle:!0,children:(0,a.jsx)(m.Z,{type:"text",className:"form-item-input",placeholder:r,value:null==u?void 0:u[0],onChange:e=>c(e,0)})})}),null==u?void 0:u.map((e,n)=>0===n?null:(0,a.jsxs)("div",{className:"form-item-container",children:[(0,a.jsx)(p.Z.Item,{colon:!1,noStyle:!0,children:(0,a.jsx)(m.Z,{value:e,type:"text",className:"form-item-input",placeholder:r,onChange:e=>c(e,n)})}),(0,a.jsxs)("div",{className:"suffix",children:[(0,a.jsx)("div",{className:"divider"}),(0,a.jsx)("div",{onClick:()=>b(n),className:"substract-button",children:t||"-"})]})]},n)),(0,a.jsx)("div",{onClick:()=>{let e=(u||[]).concat([""]);d(e),null==s||s(e)},className:"form-item-container border-0",children:(0,a.jsxs)("div",{className:"form-item-add",children:[n||(0,a.jsx)(g,{}),(0,a.jsx)("span",{children:"Add"})]})})]})};b.__docgenInfo={description:"",methods:[],displayName:"FormInputList",props:{addIcon:{required:!1,tsType:{name:"JSX.Element"},description:""},removeIcon:{required:!1,tsType:{name:"JSX.Element"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""}}};var x=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/modal/index.js");let y=()=>{history.pushState(null,"",window.location.href),x.Z.confirm({title:"确定离开此页面？",content:"您所做的修改可能不会被保存",onOk:()=>{console.log("ok")}})},f=()=>((0,o.useEffect)(()=>(history.pushState(null,"",window.location.href),window.addEventListener("popstate",y),window.addEventListener("beforeunload",e=>{let n="确认关闭窗口？";return e.returnValue=n,n}),()=>{window.onbeforeunload=null,window.removeEventListener("popstate",y)}),[]),(0,a.jsx)(a.Fragment,{children:"Leave Modal"}));f.__docgenInfo={description:"",methods:[],displayName:"LeaveModal"};var h=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/select/index.js"),j=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/input-number/index.js");let w=e=>{let{style:n,value:t,onChange:r,max:l=10}=e,[s,i]=(0,o.useState)(0);(0,o.useEffect)(()=>{i(t)},[t]);let d=(0,o.useMemo)(()=>!s||[0,1,2].includes(s)?s:"custom",[s]),u=(0,o.useMemo)(()=>"custom"===d,[s]);return(0,a.jsxs)("div",{className:"flex items-center",style:{...n},children:[(0,a.jsx)(h.Z,{className:"flex-1",placeholder:"请选择精确度",value:d,options:[{label:"整数",value:0},{label:"一位小数",value:1},{label:"两位小数",value:2},{label:"自定义",value:"custom"}],onChange:e=>{let n="custom"===e?3:e;i(n),null==r||r(n)}}),u?(0,a.jsx)("div",{className:"w-48 ml-4",children:(0,a.jsx)(j.Z,{value:s,min:3,max:l,addonAfter:"位小数",onChange:e=>{i(e||0),null==r||r(e||0)}})}):null]})};w.__docgenInfo={description:"",methods:[],displayName:"NumberAccuracy",props:{style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},value:{required:!1,tsType:{name:"number"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},min:{required:!1,tsType:{name:"number"},description:""},max:{required:!1,tsType:{name:"number"},description:""}}};var _=t("./node_modules/.pnpm/@ant-design+icons@5.6.1_react-dom@19.0.0_react@19.0.0/node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js"),C=t("./node_modules/.pnpm/@ant-design+icons@5.6.1_react-dom@19.0.0_react@19.0.0/node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js"),S=((r=S||{}).ALL="all",r.ANY="any",r);let R=Object.keys(S).map(e=>({label:e,value:S[e]})),T={String:["equal","notEqual"],Numeric:["equal","notEqual","greaterThan","greaterThanInclusive","lessThan","lessThanInclusive"],Array:["in","notIn","contains","doesNotContain "]},k=o.createContext({properties:[]}),N=e=>{let{properties:n}=(0,o.useContext)(k),{conditions:t,onConditionsChange:r,onAddLeaf:l,onRemoveLeaf:s}=e,i=n.map(e=>({label:e.title,value:e.code})),d=n.find(e=>e.code===t.fact),u=d?T[d.type]:[];return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,a.jsx)(h.Z,{placeholder:"属性",style:{width:"160px"},options:i,value:t.fact,onChange:e=>r({...t,fact:e})}),(0,a.jsx)(h.Z,{style:{width:"160px",marginLeft:"10px"},placeholder:"运算符",options:u.map(e=>({label:e,value:e})),value:t.operator,onChange:e=>r({...t,operator:e})}),(null==d?void 0:d.widget)==="text"?(0,a.jsx)(m.Z,{style:{width:"160px",marginLeft:"10px"},type:"text",placeholder:"请输入",value:t.value,onChange:e=>r({...t,value:e})}):(null==d?void 0:d.widget)==="number"?(0,a.jsx)(j.Z,{style:{width:"160px",marginLeft:"10px"},type:"number",...d.controlProps,placeholder:"请输入",value:t.value,onChange:e=>r({...t,value:e})}):(null==d?void 0:d.widget)==="select"?(0,a.jsx)(h.Z,{mode:"String"===d.type?void 0:"multiple",style:{width:"160px",marginLeft:"10px"},placeholder:"值",options:d.controlProps.options,value:t.value,onChange:e=>r({...t,value:e})}):(0,a.jsx)(m.Z,{style:{width:"160px",marginLeft:"10px"},type:"text",placeholder:"请输入",value:t.value,onChange:e=>r({...t,value:e})}),(0,a.jsx)(_.Z,{style:{color:"#888",marginLeft:"10px",cursor:"pointer"},onClick:s})]})})},L=e=>{let{isRoot:n,conditions:t,onAddLeaf:r,onRemoveLeaf:l,onRemoveLogic:o,onConditionsChange:s}=e,i=Object.keys(t)[0];if(!t.any&&!t.all)return(0,a.jsx)(N,{conditions:t,onConditionsChange:s,onAddLeaf:r,onRemoveLeaf:l});let u=(e,n)=>{let r=t[i].map((t,r)=>e===r?n:t);s({[i]:r})},c=e=>{let n=t[i].filter((n,t)=>t!==e);if(n.length<=0){d.ZP.error("至少保留一个条件/条件组");return}s({[i]:n})},p=e=>{let n=t[i].filter((n,t)=>t!==e);if(n.length<=0){d.ZP.error("至少保留一个条件/条件组");return}s({[i]:n})},m=()=>{s({[i]:[...t[i],{fact:void 0,operator:void 0,value:void 0}]})},g={paddingTop:"10px",marginBottom:"10px",paddingRight:"10px"};return n||(g.border="1px dashed #ddd",g.borderRadius="8px"),(0,a.jsxs)("div",{style:g,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(h.Z,{style:{width:"80px"},variant:"borderless",value:i,options:R,onChange:e=>{s({[e]:t[i]})}}),(0,a.jsx)("div",{children:t[i].map((e,n)=>(0,a.jsx)(L,{conditions:e,onConditionsChange:e=>u(n,e),onAddLeaf:m,onRemoveLeaf:()=>c(n),onRemoveLogic:()=>p(n)},n))})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:"80px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"10px",marginBottom:"10px",color:"#333",cursor:"pointer"},onClick:()=>m(),children:[(0,a.jsx)(C.Z,{style:{cursor:"pointer"}}),(0,a.jsx)("span",{style:{fontSize:"14px",marginLeft:"4px"},children:"添加条件"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"10px",marginBottom:"10px",color:"#333",cursor:"pointer"},onClick:()=>{s({[i]:[...t[i],{all:[{fact:void 0,operator:void 0,value:void 0},{fact:void 0,operator:void 0,value:void 0}]}]})},children:[(0,a.jsx)(C.Z,{style:{cursor:"pointer"}}),(0,a.jsx)("span",{style:{fontSize:"14px",marginLeft:"4px"},children:"添加条件组"})]}),n?null:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"10px",marginBottom:"10px",color:"#333",cursor:"pointer"},onClick:o,children:[(0,a.jsx)(_.Z,{style:{cursor:"pointer"}}),(0,a.jsx)("span",{style:{fontSize:"14px",marginLeft:"4px"},children:"移除当前组"})]})]})]})},q=e=>{let{value:n,onChange:t,properties:r=[]}=e;return(0,a.jsx)(k.Provider,{value:{properties:r},children:(0,a.jsx)(L,{isRoot:!0,conditions:n,onConditionsChange:t})})};q.__docgenInfo={description:"",methods:[],displayName:"RuleEditor",props:{value:{required:!1,tsType:{name:"Record",elements:[{name:"union",raw:'"all" | "any"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"any"'}]},{name:"Array",elements:[{name:"union",raw:"ILogicRule | ILeafRule",elements:[{name:"ILogicRule"},{name:"ILeafRule"}]}],raw:"IRule[]"}],raw:"Record<ILogicOperator, IRule[]>"},description:"规则"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: Rule) => void",signature:{arguments:[{type:{name:"Rule"},name:"value"}],return:{name:"void"}}},description:"规则改变事件"},properties:{required:!0,tsType:{name:"Array",elements:[{name:"IProperty"}],raw:"IProperty[]"},description:"可选属性列表"}}};var I=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/empty/index.js"),P=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/tooltip/index.js"),Z=t("./node_modules/.pnpm/antd@5.23.0_react-dom@19.0.0_react@19.0.0/node_modules/antd/es/tag/index.js"),E=t("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js"),A=t.n(E);let F=(e,n)=>{let{searchIdsGetter:t,selectChangeHandler:r,dropdownVisibleChangeHandler:l,blurHandler:s,disabled:i,mode:d,placeholder:u,value:c,options:p,onChange:m,onBlur:g,request:v,availableValues:b,disabledValues:x,customLabelRenderer:y,allowClear:f,style:h,bordered:j,className:w,maxTagCount:_="responsive",suffixIcon:C,showSearch:S=!0,labelInValue:R}=e,[T,k]=(0,o.useState)(!1),[N,L]=(0,o.useState)([]),[q,I]=(0,o.useState)(!1),[P,Z]=(0,o.useState)(),[E,F]=(0,o.useState)(!1),O=(0,o.useCallback)(e=>(null==b?void 0:b.length)?b.includes(e.value):!(null==x?void 0:x.includes(e.value)),[b,x]),V=(0,o.useCallback)(e=>{if(y)return{...e,originalLabel:e.label,label:y(e)};if(e.config){let{color:n}=JSON.parse(e.config);return{...e,originalLabel:e.label,label:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:e.label}),(0,a.jsx)("div",{style:{background:n,width:"16px",height:"16px",borderRadius:"4px"}})]})}}return e},[y]),z=(0,o.useMemo)(()=>null==p?void 0:p.map(e=>V(e)).filter(O),[p,O,V]),J=(0,o.useCallback)(async(e,n)=>{var r;if(!v)return Promise.resolve([]);k(!0);let a=await v(e,t(n));L(null==a?void 0:null===(r=a.map(e=>V(e)))||void 0===r?void 0:r.filter(O)),k(!1)},[O,v,t,V]);(0,o.useEffect)(()=>{v&&J("",c&&"string"==typeof c?[c]:c)},[]);let M=(0,o.useCallback)(()=>{E&&!q&&I(!0)},[E,q]),D=(0,o.useCallback)(async()=>{F(!0),v&&await J("",c&&"string"==typeof c?[c]:c),I(!0)},[J,c,v]),H=(0,o.useCallback)(()=>{null==s||s(null,{value:P,onBlur:g}),I(!1)},[s,g,P]);(0,o.useEffect)(()=>{!A().isEqual(c,P)&&(v&&J("",c&&"string"==typeof c?[c]:c),Z(c))},[c]);let K=(0,o.useCallback)(async()=>{E?v&&E&&await J(""):n.current.focus()},[E,J,v,n]),B=(0,o.useMemo)(()=>({bordered:j,open:q,loading:T,className:`ace-turbo-select ${w}`,allowClear:f,mode:d,disabled:i,showSearch:S,value:P,placeholder:u,style:h,defaultActiveFirstOption:!1,showArrow:!i,filterOption:!v&&((e,n)=>{var t,r;return null===(r=(null==n?void 0:n.label)??"")||void 0===r?void 0:null===(t=r.toLowerCase())||void 0===t?void 0:t.includes(e.toLowerCase())}),notFoundContent:null,options:v?N:z,dropdownStyle:{padding:"6px"},maxTagCount:_,suffixIcon:C,labelInValue:R}),[f,j,w,N,i,z,T,_,d,q,u,v,h,C,P,S,R]),X=(0,o.useCallback)(e=>{Z(e),null==r||r(e,{open:q,setOpen:I,options:B.options||[],onChange:m})},[m,q,r,B.options]),U=(0,o.useCallback)(e=>{I(e),null==l||l(e,{value:P,onChange:m})},[P,m,l]);return(0,o.useMemo)(()=>({...B,onSearch:J,onChange:X,onClick:M,onFocus:D,onBlur:H,onClear:K,onDropdownVisibleChange:U}),[B,J,X,M,D,H,K,U])},O=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==e?void 0:e.filter(e=>null==n?void 0:n.some(n=>t?n.value===e.value:n.value===e))},V=(0,o.forwardRef)(e=>{let{availableValues:n,parentRef:t,disabled:r,value:l,labelInValue:s}=e,i=(0,o.useRef)(!1),d=(0,o.useRef)(null),u=F({...e,searchIdsGetter:e=>Array.from(new Set((n||[]).concat(e||[]))),selectChangeHandler:(e,n)=>{let{open:t,onChange:r}=n;!t&&r&&c(e,r)},dropdownVisibleChangeHandler:(e,n)=>{let{value:t,onChange:r}=n;e||(i.current=!1,c(t,r))},blurHandler:(e,n)=>{let{value:t,onBlur:r}=n,a=O(t,u.options,s);null==r||r({target:{value:a}})}},d),c=(e,n)=>{if(!A().isEqual(e,l)){if(i.current)null==n||n(e,null==e?void 0:e.map(e=>{var n;return null===(n=u.options)||void 0===n?void 0:n.find(n=>n.value===e)}));else{let t=O(e,u.options,s);null==n||n(t,null==t?void 0:t.map(e=>{var n;return null===(n=u.options)||void 0===n?void 0:n.find(n=>n.value===e)}))}}};return(0,o.useImperativeHandle)(t,()=>({getValue:()=>u.value,getLabel:()=>{var e,n;return null===(n=u.options)||void 0===n?void 0:null===(e=n.filter(e=>{var n;return null===(n=u.value)||void 0===n?void 0:n.includes(e.value)}))||void 0===e?void 0:e.map(e=>e.originalLabel||e.label)},focus:()=>{var e;null===(e=d.current)||void 0===e||e.focus()}})),(0,a.jsx)(h.Z,{...u,ref:d,onSearch:e=>{var n;i.current=!!e,null===(n=u.onSearch)||void 0===n||n.call(u,e)},mode:"multiple",maxTagCount:u.maxTagCount,notFoundContent:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(I.Z,{})}),maxTagPlaceholder:e=>{let n=i.current?e:O(e,u.options||[],!0);return(0,a.jsxs)(P.Z,{arrowPointAtCenter:!0,overlayClassName:"bg-white",placement:"topLeft",title:n.map(e=>(0,a.jsx)("div",{children:e},e)),children:["+",null==n?void 0:n.length]})},tagRender:e=>{var n;let{label:t,value:l,closable:o,onClose:s}=e;if(!t&&!l)return(0,a.jsx)(a.Fragment,{});let d=null===(n=u.options)||void 0===n?void 0:n.some(e=>e.value===l);return i||d?(0,a.jsx)(Z.Z,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:o,onClose:s,style:{display:"flex",alignItems:"center",height:"24px",lineHeight:"24px",fontSize:"14px",margin:3,color:r?"#bfbfbf":"#000000",border:"1px solid",borderColor:r?"#d9d9d9":"#f0f0f0",background:"#f5f5f5"},children:t}):(0,a.jsx)("span",{style:{display:"block",width:"1px",height:"1px",opacity:1,overflow:"hidden"},children:"占位"})}})}),z=e=>{let{availableValues:n,options:t,parentRef:r}=e,l=(0,o.useRef)(null),s=F({...e,searchIdsGetter:e=>{let t=Array.from(new Set((n||[]).concat(e||[])));return n||e?t:void 0},selectChangeHandler:(e,n)=>{let{setOpen:r,onChange:a}=n;if(r(!1),a){let n=null==t?void 0:t.find(n=>n.value===e);a(e,n)}}},l);return(0,o.useImperativeHandle)(r,()=>({getValue:()=>s.value,getLabel:()=>{var e;let n=null===(e=s.options)||void 0===e?void 0:e.find(e=>e.value===s.value);return n?n.originalLabel||n.label:""},focus:()=>{var e;null===(e=l.current)||void 0===e||e.focus()}})),(0,a.jsx)(h.Z,{...s,ref:l})};z.__docgenInfo={description:"TurboSelect 单选实现",methods:[{name:"getValue",docblock:null,modifiers:[],params:[],returns:null},{name:"getLabel",docblock:null,modifiers:[],params:[],returns:{type:{name:"string"}}},{name:"focus",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TurboSelectSingle",props:{request:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  searchValue: string,\n  ids: Key[],\n) => Promise<SelectProps['options']>",signature:{arguments:[{type:{name:"string"},name:"searchValue"},{type:{name:"Array",elements:[{name:"Key"}],raw:"Key[]"},name:"ids"}],return:{name:"Promise",elements:[{name:"SelectProps['options']",raw:"SelectProps['options']"}],raw:"Promise<SelectProps['options']>"}}},description:""},availableValues:{required:!1,tsType:{name:"Array",elements:[{name:"Key"}],raw:"Key[]"},description:""},disabledValues:{required:!1,tsType:{name:"Array",elements:[{name:"Key"}],raw:"Key[]"},description:""},customLabelRenderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: DefaultOptionType) => React.ReactNode",signature:{arguments:[{type:{name:"DefaultOptionType"},name:"item"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"自定义 label 渲染函数\n@param item 数据条目对象"},parentRef:{required:!0,tsType:{name:"any"},description:""}},composes:["SelectProps"]};let J=(0,o.forwardRef)((e,n)=>{let{mode:t,...r}=e;return"multiple"===t?(0,a.jsx)(V,{parentRef:n,...r}):(0,a.jsx)(z,{parentRef:n,...r})});J.__docgenInfo={description:"Ant Design Select 终极封装，完善每一个交互细节",methods:[],displayName:"TurboSelect"};var M=t("./src/UltraTable/index.tsx")}}]);